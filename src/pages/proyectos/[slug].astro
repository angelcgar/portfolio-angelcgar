---
export const prerender = true;

import { getProjectData } from '../../lib/api';
import Layout from '../../layouts/Layout.astro';
import type { GetStaticPaths } from 'astro';

export const getStaticPaths = (async () => {
  const proyectos = await getProjectData();

  const paths = proyectos.map((slug) => ({
    params: { slug: slug.name },
  }));

  return paths;
}) satisfies GetStaticPaths;

const { slug } = Astro.params;

const proyecto = await getProjectData().then((data) =>
  data.find((proyecto) => proyecto.name === slug),
);
if (!proyecto) {
  throw new Error(`No se encontró el proyecto con slug: ${slug}`);
}
---

<Layout title={proyecto.title} lang='es' isNavbarTransparent={false} description={proyecto.description || 'Este es un proyecto'}>
  <main class="container px-4 pt-4 mx-auto max-w-3xl">
    <header class="mb-10">
      <h1
        class="text-4xl font-extrabold text-center mb-6 dark:text-white"
      >
        {proyecto.title}
      </h1>
    </header>

    <section class="flex flex-col items-center mb-10">
      <img
        src={proyecto.image}
        alt={proyecto.title}
        class="object-cover w-full h-auto max-w-2xl rounded-lg shadow-lg border"
        style="border-color: var(--color-border, #e5e7eb);"
      />
    </section>

    <section class="mb-10">
      <h2
        class="text-3xl font-bold mb-6"
      >
        Caso de Estudio
      </h2>
      <div class="mb-6">
        <h3
          class="text-xl font-semibold mb-2"
        >
          Problema
        </h3>
        <p
          class="leading-relaxed text-base"
        >
          {
            proyecto.caseStudy?.problem ??
              'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod, justo at tempus dignissim, lorem augue gravida enim, at dictum sapien lacus et urna.'
          }
        </p>
      </div>
      <div class="mb-6">
        <h3
          class="text-xl font-semibold mb-2"
        >
          Solución
        </h3>
        <p
          class="leading-relaxed text-base"
        >
          {
            proyecto.caseStudy?.solution ??
              'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod, justo at tempus dignissim, lorem augue gravida enim, at dictum sapien lacus et urna.'
          }
        </p>
      </div>
      <div class="mb-6">
        <h3
          class="text-xl font-semibold mb-2"
        >
          Tecnologías
        </h3>
        <p
          class="leading-relaxed text-base"
        >
          {
            proyecto.caseStudy?.technologies ??
              'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod, justo at tempus dignissim, lorem augue gravida enim, at dictum sapien lacus et urna.'
          }
        </p>
      </div>
    </section>

    <footer class="mt-16 text-center">
      <a
        href="/"
        class="inline-block text-lg underline transition"
        style="color: var(--color-accent, #0070f3);"
      >
        ← Volver a Proyectos
      </a>
    </footer>
  </main>
</Layout>
